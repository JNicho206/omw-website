"use strict";(self.webpackChunkangular_bootstrap=self.webpackChunkangular_bootstrap||[]).push([[947],{7947:(X,m,c)=>{c.r(m),c.d(m,{BooksModule:()=>G});var d=c(9808),p=c(1810),g=c(6199),t=c(4893),T=c(520);let _=(()=>{class o{constructor(e){this.http=e,this._jsonURL="./../../assets/data/bookslist.json"}getallbooks(){return this.http.get(this._jsonURL)}}return o.\u0275fac=function(e){return new(e||o)(t.LFG(T.eN))},o.\u0275prov=t.Yz7({token:o,factory:o.\u0275fac,providedIn:"root"}),o})();var k=c(1976);function S(o,i){if(1&o){const e=t.EpF();t.TgZ(0,"div",2)(1,"div",3)(2,"div"),t._UZ(3,"img",4)(4,"div",5),t.qZA(),t.TgZ(5,"div",6)(6,"h4",7),t._uU(7),t.qZA(),t.TgZ(8,"div",8)(9,"small",9),t._uU(10),t.qZA()(),t.TgZ(11,"p",10),t._uU(12),t.qZA(),t.TgZ(13,"a",11),t.NdJ("click",function(){const a=t.CHM(e).$implicit;return t.oxw().gotobook(a.id)}),t._uU(14,"Read Book"),t.qZA()()()()}if(2&o){const e=i.$implicit;t.xp6(3),t.s9C("src","../../../../assets/books/"+e.coverimg,t.LSH),t.xp6(4),t.Oqu(e.maintitle),t.xp6(3),t.hij(" ",e.title,""),t.xp6(2),t.Oqu(e.description)}}let M=(()=>{class o{constructor(e,n){this.route=e,this.router=n}ngOnInit(){}gotobook(e){this.router.navigate(["book",e],{relativeTo:this.route})}}return o.\u0275fac=function(e){return new(e||o)(t.Y36(p.gz),t.Y36(p.F0))},o.\u0275cmp=t.Xpm({type:o,selectors:[["app-books-list"]],inputs:{booklist:"booklist"},decls:2,vars:1,consts:[[1,"row","pb-3"],["class","col-lg-6 col-md-12 mb-4",4,"ngFor","ngForOf"],[1,"col-lg-6","col-md-12","mb-4"],[1,"border-0","mb-2"],["alt","",1,"card-img-top",3,"src"],[2,"width","100%","height","68%","position","absolute","top","0","left","0"],[1,"card-body","bg-light","p-4"],[1,"card-title","text-truncate","blacktext"],[1,"d-flex","mb-3"],[1,"mr-2","card-subtitle","blacktext"],[1,"blacktext"],[1,"font-weight-bold","hyperlink-text","linkcursor","linkcolor",3,"click"]],template:function(e,n){1&e&&(t.TgZ(0,"div",0),t.YNc(1,S,15,4,"div",1),t.qZA()),2&e&&(t.xp6(1),t.Q6J("ngForOf",n.booklist))},directives:[d.sg],styles:[".blacktext[_ngcontent-%COMP%]{color:#000!important}"]}),o})(),Z=(()=>{class o{constructor(e){this.bookservice=e}ngOnInit(){this.selectedLanguageType=g.e.ENG,this.bookservice.getallbooks().subscribe(e=>{this.fullbooklist=e,this.updatedataBylanguage()})}onLanguageChange(e){this.selectedLanguageType=e==g.e.ENG?g.e.ENG:g.e.SP,this.updatedataBylanguage()}updatedataBylanguage(){this.booklist=this.fullbooklist.filter(e=>e.languagetype==this.selectedLanguageType)}}return o.\u0275fac=function(e){return new(e||o)(t.Y36(_))},o.\u0275cmp=t.Xpm({type:o,selectors:[["app-books"]],decls:12,vars:2,consts:[[1,"container","pt-5"],[1,"d-flex","flex-column","text-center","mb-5","pt-5"],[1,"display-4","m-0"],[1,""],[1,"buttontogglelayout"],["name","languagetoggle","aria-label","Language",3,"value","change"],["value","eng"],["value","sp"],[3,"booklist"]],template:function(e,n){1&e&&(t.TgZ(0,"div",0)(1,"div",1)(2,"h1",2)(3,"span",3),t._uU(4,"Our Mathematical World Books"),t.qZA()()(),t.TgZ(5,"div",4)(6,"mat-button-toggle-group",5),t.NdJ("change",function(a){return n.onLanguageChange(a.value)}),t.TgZ(7,"mat-button-toggle",6),t._uU(8,"English"),t.qZA(),t.TgZ(9,"mat-button-toggle",7),t._uU(10,"Spanish"),t.qZA()()(),t._UZ(11,"app-books-list",8),t.qZA()),2&e&&(t.xp6(6),t.Q6J("value",n.selectedLanguageType),t.xp6(5),t.Q6J("booklist",n.booklist))},directives:[k.A9,k.Yi,M],styles:[""]}),o})();var l=c(9405),b=c(7579),h=c(9300),u=c(8505),r=c(2722),f=c(1135),P=c(2076),B=c(9646),A=c(6451),v=c(4004),L=c(262);class x{}class C{}class ${}class w{}class N{constructor(i){this.payload=i}}class y{constructor(i){this.payload=i}}let U=(()=>{class o{constructor(e){this.zone=e,this.defaultVoiceName="Google US English",this.language="en-US",this.destroy$=new b.x,this.isAllowed=!0,this.voices=null,this._voices$=new f.X(null),this.voices$=this._voices$.asObservable(),this._activeVoice$=new f.X(null),this.activeVoice$=this._activeVoice$.asObservable(),this._action$=new b.x,this.action$=this._action$.asObservable(),this.hasMicrofonAccess$=(0,P.D)(navigator.mediaDevices.getUserMedia({audio:!0})).pipe((0,v.U)(()=>!0),(0,L.K)(n=>(console.error(n),console.log("No microphone access"),(0,B.of)(!1)))),this.window=window,this.createSpeaker(),this.createListener(),this.subscriptions()}set isSpeaking(e){this.speaker._isSpeaking=e}get isSpeaking(){return!!this.speaker._isSpeaking}get isPaused(){return this.window.speechSynthesis.paused}set isListening(e){this.listener._isListening=e}get isListening(){return!!this.listener._isListening}subscriptions(){this.getType(x).pipe((0,u.b)(()=>this.stopListening()),(0,r.R)(this.destroy$)).subscribe(),(0,A.T)(this.getType(C),this.getType(w)).pipe((0,h.h)(()=>!this.isSpeaking),(0,u.b)(()=>this.startListening()),(0,r.R)(this.destroy$)).subscribe(),this.getType(y).pipe((0,u.b)(e=>this._speak(e)),(0,r.R)(this.destroy$)).subscribe()}getType(e){return this.action$.pipe((0,h.h)(n=>n instanceof e),(0,v.U)(n=>n.payload),(0,r.R)(this.destroy$))}createSpeaker(){const e="_ms_Speaker";if(this.window[e])return console.log("speaker found"),this.speaker=this.window[e],void this.getVoices();this.speaker=new SpeechSynthesisUtterance,this.window[e]=this.speaker,this.speaker.onstart=()=>{this.zone.run(()=>{this.isSpeaking=!0,this._action$.next(new x)})},this.speaker.onend=()=>{this.zone.run(()=>{this.isSpeaking=!1,this._action$.next(new C)})},this.loadVoices()}getVoices(){const e=this.window.speechSynthesis.getVoices();this.voices=e,this._voices$.next(e);const n=e.find(s=>s.name.indexOf(this.defaultVoiceName)>-1);this.onVoiceSelected(n,!1)}loadVoices(){this.window.speechSynthesis.onvoiceschanged=()=>{this.zone.run(()=>{this.getVoices()}),this.window.speechSynthesis.onvoiceschanged=null}}createListener(){const e="_ms_Listener";if(this.window[e])return console.log("recognition found"),this.listener=this.window[e],void this.startListening();this.listener=new(0,this.window.webkitSpeechRecognition),this.window[e]=this.listener,this.listener.continuous=!0,this.listener.interimResults=!0,this.listener.maxAlternatives=1,this.listener.maxResults=25,this.listener.onstart=()=>{this.zone.run(()=>{this.isListening=!0,this._action$.next(new $)})},this.listener.onresult=s=>{if(s.results){let a;a=this.extractText(s),a.isFinal&&this.zone.run(()=>{this._action$.next(new N(a.term))})}},this.listener.onerror=s=>{"no-speech"===s.error||("not-allowed"===s.error?this.isAllowed=!1:console.error(s.error))},this.listener.onend=()=>{this.zone.run(()=>{this.isListening=!1,this._action$.next(new w)})},this.startListening()}stopListening(){this.listener.stop()}startListening(){if(this.startListening)try{if(console.log("recognition started"),!this.isAllowed)return;this.listener.start()}catch(e){}}onVoiceSelected(e,n=!0){this.speaker.voice=e,this._activeVoice$.next(e),this.speaker.lang=e.lang,this.listener&&(this.listener.lang=e.lang),n&&this._speak("Voice has been updated.")}extractText(e){let n="",s=e.results[e.resultIndex],a=s[0].transcript,O=s[0].confidence;return s.isFinal?s[0].confidence<.3||(n=a.trim()):s[0].confidence>.6&&(n=a.trim()),{term:n,confidence:O,isFinal:s.isFinal}}speak(e){this._action$.next(new y(e))}pause(){console.log("paused..."),this.window.speechSynthesis.pause()}resume(){console.log("resumed..."),this.window.speechSynthesis.resume()}cancel(){console.log("canceled..."),this.window.speechSynthesis.cancel()}_speak(e){console.log("speaking..."),this.speaker.text=e,this.window.speechSynthesis.speak(this.speaker)}activate(){this.window.speechSynthesis.cancel(),this.speak("Activated")}}return o.\u0275fac=function(e){return new(e||o)(t.LFG(t.R0b))},o.\u0275prov=t.Yz7({token:o,factory:o.\u0275fac,providedIn:"root"}),o})();const F=["ngcarousel"];function I(o,i){if(1&o&&(t.TgZ(0,"div",13)(1,"h4",14),t._uU(2),t.qZA(),t.TgZ(3,"h1",15)(4,"span",16),t._uU(5),t.qZA()()()),2&o){const e=t.oxw();t.xp6(2),t.Oqu(e.book.maintitle),t.xp6(3),t.Oqu(e.book.title)}}function J(o,i){if(1&o&&(t.TgZ(0,"option",19),t._uU(1),t.qZA()),2&o){const e=i.$implicit,n=i.index,s=t.oxw(2);t.Q6J("selected",s.selectedIndex===n)("value",n),t.xp6(1),t.AsE(" ",e.name," (",e.lang,") ")}}function V(o,i){if(1&o){const e=t.EpF();t.TgZ(0,"select",17),t.NdJ("change",function(s){return t.CHM(e),t.oxw().onChange(s.target.value)}),t.YNc(1,J,2,4,"option",18),t.qZA()}if(2&o){const e=t.oxw();t.xp6(1),t.Q6J("ngForOf",e.voices)}}function Y(o,i){if(1&o){const e=t.EpF();t.TgZ(0,"button",25),t.NdJ("click",function(){t.CHM(e);const s=t.oxw(2).index;return t.oxw().playaudio(s)}),t._uU(1,"Play Audio"),t.qZA()}}function z(o,i){if(1&o){const e=t.EpF();t.TgZ(0,"button",25),t.NdJ("click",function(){return t.CHM(e),t.oxw(3).pauseaudio()}),t._uU(1,"pause Audio"),t.qZA()}}function R(o,i){if(1&o){const e=t.EpF();t.TgZ(0,"button",25),t.NdJ("click",function(){return t.CHM(e),t.oxw(3).resumeaudio()}),t._uU(1,"resume Audio"),t.qZA()}}function E(o,i){if(1&o){const e=t.EpF();t.TgZ(0,"button",25),t.NdJ("click",function(){return t.CHM(e),t.oxw(3).stopaudio()}),t._uU(1,"Stop Audio"),t.qZA()}}function Q(o,i){if(1&o&&(t.TgZ(0,"div"),t._UZ(1,"img",21)(2,"div",22),t.qZA(),t.TgZ(3,"div",23),t.YNc(4,Y,2,0,"button",24),t.YNc(5,z,2,0,"button",24),t.YNc(6,R,2,0,"button",24),t.YNc(7,E,2,0,"button",24),t.qZA()),2&o){const e=t.oxw().$implicit,n=t.oxw();t.xp6(1),t.s9C("src","../../../../assets/books/"+n.book.bookimagesfoldername+"/"+e,t.LSH),t.s9C("alt",n.book.title),t.xp6(3),t.Q6J("ngIf",!n.IsSpeaking),t.xp6(1),t.Q6J("ngIf",n.IsSpeaking&&!n.IsPaused),t.xp6(1),t.Q6J("ngIf",n.IsPaused),t.xp6(1),t.Q6J("ngIf",n.IsSpeaking)}}function q(o,i){1&o&&t.YNc(0,Q,8,6,"ng-template",20)}let H=(()=>{class o{constructor(e,n,s,a){this.route=e,this.bookservice=n,this.sense=s,this.isPrevious=!1,this.isNext=!1,this.destroy$=new b.x,this.ispaused=!1,a.interval=0,a.keyboard=!0,a.pauseOnHover=!0}ngOnInit(){this.loadVoices(),this.stopaudio(),this.bookid=+this.route.snapshot.paramMap.get("id"),this.bookservice.getallbooks().subscribe(e=>{this.book=e.filter(n=>this.bookid==n.id)[0],this.currentbookimage=this.book.pagesimages[0],this.ngCarousel.select("1")})}loadVoices(){this.sense.voices$.pipe((0,h.h)(e=>!!e),(0,u.b)(e=>{console.log(e.length,"voices loaded"),this.voices=e}),(0,r.R)(this.destroy$)).subscribe(),this.sense.activeVoice$.pipe((0,h.h)(e=>!!e),(0,u.b)(e=>{this.selectedIndex=this.voices.indexOf(e),console.log(e,this.selectedIndex)}),(0,r.R)(this.destroy$)).subscribe()}updateVoice(){if(!this.voices)return;const e=this.voices[this.selectedIndex];!e||(console.log(e.name),this.sense.onVoiceSelected(e))}onChange(e){this.selectedIndex=e}playaudio(e){this.sense.speak(this.book.pagestexts[e]),this.ispaused=!1}stopaudio(){this.sense.cancel(),this.ispaused=!1}pauseaudio(){this.sense.pause(),this.ispaused=!0}resumeaudio(){this.sense.resume(),this.ispaused=!1}previousStep(){this.isPrevious=!0,this.ngCarousel.prev()}nextStep(){this.isNext=!0,this.ngCarousel.next()}get IsSpeaking(){return this.sense.isSpeaking}get IsPaused(){return this.ispaused}}return o.\u0275fac=function(e){return new(e||o)(t.Y36(p.gz),t.Y36(_),t.Y36(U),t.Y36(l.Lu))},o.\u0275cmp=t.Xpm({type:o,selectors:[["app-book"]],viewQuery:function(e,n){if(1&e&&t.Gf(F,7),2&e){let s;t.iGM(s=t.CRH())&&(n.ngCarousel=s.first)}},features:[t._Bn([l.Lu])],decls:19,vars:3,consts:[[1,"container","mt-5","pt-5","pb-3"],["class","d-flex flex-column text-center mb-5",4,"ngIf"],[1,"voicewidth"],["class","form-control",3,"change",4,"ngIf"],[1,"btn","btn-primary",3,"click"],[1,"row","book-sectionsize"],[1,"row"],["showNavigationArrows","true",1,""],["ngcarousel",""],[4,"ngFor","ngForOf"],[1,"row","justify-content-center"],["type","button",1,"btn","btn-sm","btn-next","book-btn",3,"click"],["type","button",1,"btn","btn-sm","btn-prevous","m-r","book-btn",3,"click"],[1,"d-flex","flex-column","text-center","mb-5"],[1,"text-secondary","mb-3"],[1,"display-4","m-0"],[1,"text-primary"],[1,"form-control",3,"change"],[3,"selected","value",4,"ngFor","ngForOf"],[3,"selected","value"],["ngbSlide","","class","carouselCont"],[1,"book-image",3,"src","alt"],[2,"width","100%","height","100%","position","absolute","top","0","left","0"],[1,"carousel-caption"],[3,"click",4,"ngIf"],[3,"click"]],template:function(e,n){1&e&&(t.TgZ(0,"div",0),t.YNc(1,I,6,2,"div",1),t.TgZ(2,"div",2)(3,"label"),t._uU(4," Audio Voice:"),t.qZA(),t.YNc(5,V,2,1,"select",3),t.TgZ(6,"button",4),t.NdJ("click",function(){return n.updateVoice()}),t._uU(7," Update "),t.qZA()(),t.TgZ(8,"div",5)(9,"div",6)(10,"ngb-carousel",7,8),t.YNc(12,q,1,0,null,9),t.qZA()(),t.TgZ(13,"div",10)(14,"button",11),t.NdJ("click",function(){return n.nextStep()}),t._uU(15,"Next"),t.qZA()(),t.TgZ(16,"div",10)(17,"button",12),t.NdJ("click",function(){return n.previousStep()}),t._uU(18,"Previous"),t.qZA()()()()),2&e&&(t.xp6(1),t.Q6J("ngIf",n.book),t.xp6(4),t.Q6J("ngIf",n.voices),t.xp6(7),t.Q6J("ngForOf",null==n.book?null:n.book.pagesimages))},directives:[d.O5,d.sg,l.uo,l.xl],styles:[".carouselCont[_ngcontent-%COMP%]{display:flex;flex-direction:row;justify-content:center;align-items:center;height:100vh}.voicewidth[_ngcontent-%COMP%]{text-align:center;width:300px;margin:0 auto}@media (max-width: 480px){.book-btn[_ngcontent-%COMP%]{width:93%}.book-sectionsize[_ngcontent-%COMP%]{padding-left:30px;width:350px}.book-image[_ngcontent-%COMP%]{width:100%}}@media (min-width: 481px) and (max-width: 767px){.book-btn[_ngcontent-%COMP%]{width:95%}.book-sectionsize[_ngcontent-%COMP%]{padding-left:30px;width:450px}.book-image[_ngcontent-%COMP%]{width:100%}}@media (min-width: 768px) and (max-width: 1024px){.book-btn[_ngcontent-%COMP%]{width:97%}.book-sectionsize[_ngcontent-%COMP%]{padding-left:30px;width:780px}.book-image[_ngcontent-%COMP%]{width:100%}}@media (min-width: 1025px){.book-btn[_ngcontent-%COMP%]{width:98%}.book-sectionsize[_ngcontent-%COMP%]{width:1025px}.book-image[_ngcontent-%COMP%]{width:100%}}.btn-next[_ngcontent-%COMP%]{color:#fff;background-color:#000;border-color:#000}.btn-next[_ngcontent-%COMP%]:hover{color:#fff;background-color:gray;border-color:gray}.btn-next[_ngcontent-%COMP%]:focus, .btn-next.focus[_ngcontent-%COMP%]{box-shadow:0 0 0 .2rem #40414080}.btn-next.disabled[_ngcontent-%COMP%], .btn-next[_ngcontent-%COMP%]:disabled{color:#fff;background-color:#000;border-color:#000}.btn-next[_ngcontent-%COMP%]:not(:disabled):not(.disabled):active, .btn-next[_ngcontent-%COMP%]:not(:disabled):not(.disabled).active, .show[_ngcontent-%COMP%] > .btn-next.dropdown-toggle[_ngcontent-%COMP%]{color:#fff;background-color:gray;border-color:gray}.btn-next[_ngcontent-%COMP%]:not(:disabled):not(.disabled):active:focus, .btn-next[_ngcontent-%COMP%]:not(:disabled):not(.disabled).active:focus, .show[_ngcontent-%COMP%] > .btn-next.dropdown-toggle[_ngcontent-%COMP%]:focus{box-shadow:0 0 0 .2rem #40414080}.btn-prevous[_ngcontent-%COMP%]{color:#000;background-color:#f1bc31;border-color:#f1bc31}.btn-prevous[_ngcontent-%COMP%]:hover{color:#000;background-color:#be9429;border-color:#be9429}.btn-prevous[_ngcontent-%COMP%]:focus, .btn-prevous.focus[_ngcontent-%COMP%]{box-shadow:0 0 0 .2rem #6c8f1a80}.btn-prevous.disabled[_ngcontent-%COMP%], .btn-prevous[_ngcontent-%COMP%]:disabled{color:#000;background-color:#be9429;border-color:#be9429}.btn-prevous[_ngcontent-%COMP%]:not(:disabled):not(.disabled):active, .btn-prevous[_ngcontent-%COMP%]:not(:disabled):not(.disabled).active, .show[_ngcontent-%COMP%] > .btn-prevous.dropdown-toggle[_ngcontent-%COMP%]{color:#000;background-color:#be9429;border-color:#be9429}.btn-prevous[_ngcontent-%COMP%]:not(:disabled):not(.disabled):active:focus, .btn-prevous[_ngcontent-%COMP%]:not(:disabled):not(.disabled).active:focus, .show[_ngcontent-%COMP%] > .btn-prevous.dropdown-toggle[_ngcontent-%COMP%]:focus{box-shadow:0 0 0 .2rem #6c8f1a80}"]}),o})();var j=c(3806);let G=(()=>{class o{}return o.\u0275fac=function(e){return new(e||o)},o.\u0275mod=t.oAB({type:o}),o.\u0275inj=t.cJS({imports:[[d.ez,l.IJ,j.W,p.Bz.forChild([{path:"",component:Z},{path:"book/:id",component:H}])]]}),o})()}}]);